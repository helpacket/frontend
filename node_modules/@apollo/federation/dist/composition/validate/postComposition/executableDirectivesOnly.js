"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("apollo-server-env");
const graphql_1 = require("graphql");
const utils_1 = require("../../utils");
exports.executableDirectivesOnly = ({ schema, }) => {
    const errors = [];
    const customTypeSystemDirectives = schema
        .getDirectives()
        .filter(x => !utils_1.isFederationDirective(x) &&
        !graphql_1.isSpecifiedDirective(x) &&
        !utils_1.isExecutableDirective(x));
    customTypeSystemDirectives.forEach(directive => {
        if (!directive.federation)
            return;
        Object.keys(directive.federation.directiveDefinitions).forEach(serviceName => {
            errors.push(utils_1.errorWithCode('EXECUTABLE_DIRECTIVES_ONLY', utils_1.logServiceAndType(serviceName, '@' + directive.name) +
                `is a type system directive, but only executable directives are permitted. Executable directives exist for the following locations: ${utils_1.executableDirectiveLocations.join(', ')}`));
        });
    });
    return errors;
};
//# sourceMappingURL=executableDirectivesOnly.js.map